# Internationalization (i18n)

This project uses **i18next** and **react-i18next** for internationalization support.

## Supported Languages

- **English (en)** - Default language
- **Spanish (es)** - Español

## Features

- ✅ Full translation coverage for all UI text
- ✅ Dynamic language switching
- ✅ Accessibility maintained across all languages
- ✅ HTML lang attribute updates automatically
- ✅ Translation interpolation for dynamic content
- ✅ Fallback to English if translation missing

## Usage

### In Components

```tsx
import { useTranslation } from "react-i18next";

function MyComponent() {
  const { t } = useTranslation();

  return (
    <div>
      <h1>{t("common.title")}</h1>
      <p>{t("user.name", { name: userName })}</p>
    </div>
  );
}
```

### Translation Files

Translation files are located in `src/i18n/locales/`:

- `en.json` - English translations
- `es.json` - Spanish translations

### Translation Keys Structure

```json
{
  "common": {
    "loading": "Loading...",
    "error": "Error",
    "success": "Success"
  },
  "navigation": {
    "skipToMain": "Skip to main content",
    "goToHome": "Go to Home"
  },
  "bookList": {
    "title": "Book List",
    "author": "by {{name}}"
  }
}
```

## Language Switcher

The language switcher is available at the top of every page:

- Click **English** to switch to English
- Click **Español** to switch to Spanish

The selected language persists during the session and updates:

- All UI text
- ARIA labels for screen readers
- HTML lang attribute

## Adding New Languages

1. Create a new translation file in `src/i18n/locales/` (e.g., `fr.json`)
2. Copy the structure from `en.json`
3. Translate all keys
4. Import and add to `src/i18n/config.ts`:

```typescript
import fr from "./locales/fr.json";

const resources = {
  en: { translation: en },
  es: { translation: es },
  fr: { translation: fr }, // Add new language
};
```

5. Add button to `LanguageSwitcher.tsx`

## Adding New Translation Keys

1. Add the key to all language files (`en.json`, `es.json`)
2. Use the key in your component with `t('namespace.key')`

Example:

```json
// en.json
{
  "user": {
    "greeting": "Hello, {{name}}!"
  }
}

// es.json
{
  "user": {
    "greeting": "¡Hola, {{name}}!"
  }
}
```

```tsx
// Component
const greeting = t("user.greeting", { name: "John" });
// English: "Hello, John!"
// Spanish: "¡Hola, John!"
```

## Interpolation

Use double curly braces `{{variable}}` for dynamic content:

```tsx
t("bookList.author", { name: book.author.name });
// English: "by Jane Doe"
// Spanish: "por Jane Doe"
```

## Accessibility Considerations

- HTML `lang` attribute is automatically updated when language changes
- Screen readers will use the correct language pronunciation
- All ARIA labels and descriptions are translated
- Language switcher buttons have proper `aria-pressed` states

## Configuration

Configuration is in `src/i18n/config.ts`:

```typescript
i18n.use(initReactI18next).init({
  resources,
  lng: "en", // Default language
  fallbackLng: "en", // Fallback if translation missing
  interpolation: {
    escapeValue: false, // React handles escaping
  },
});
```

## Testing Translations

1. Switch language using the language switcher
2. Navigate through all pages
3. Trigger notifications (toasts and modals)
4. Test with screen readers in each language
5. Verify all text is translated

## Common Translation Namespaces

| Namespace          | Description         | Example Keys                        |
| ------------------ | ------------------- | ----------------------------------- |
| `common`           | Shared UI elements  | loading, error, success, cancel, ok |
| `navigation`       | Navigation elements | skipToMain, goToHome, goToBook      |
| `bookList`         | Book list page      | title, empty, author, refreshButton |
| `user`             | User profile        | title, email, name, showName        |
| `notification`     | Notifications       | close, context, code, cancelAction  |
| `notificationTest` | Test page           | title, successToast, warningModal   |
| `aria`             | ARIA labels         | bookListSection, notificationRegion |

## Best Practices

1. **Always add keys to all language files** - Prevents missing translations
2. **Use namespaces** - Organize related keys together
3. **Keep keys descriptive** - Use clear, semantic names
4. **Test all languages** - Ensure translations make sense in context
5. **Consider text length** - Translations may be longer/shorter than English
6. **Use interpolation** - For dynamic content with proper context
7. **Maintain accessibility** - Translate all ARIA labels and descriptions

## Future Enhancements

- [ ] Add more languages (French, German, etc.)
- [ ] Persist language preference in localStorage
- [ ] Detect browser language on first load
- [ ] Add RTL (Right-to-Left) language support
- [ ] Translation management UI
- [ ] Automated translation validation
